# Semantic Parsing via Staged Query Graph Generation:Question Answering with Knowledge Base
------------------

## 摘要
我们提出了一个新的语义解析框架来做基于知识库的问答。我们定义查询图为与知识库的子图相似的并且可以直接映射为逻辑形式。语义解析简化为查询图的生成，形式化为阶段查询问题。不同于传统的方法，我们的方法在早期利用知识库来削减查询空间，从而简化语义匹配问题。通过应用一个先进的实体链接系统和一个深度卷积神经网络模型来匹配问题和谓语序列，我们胜过了先前的方法，并且在WEBQUESTIONS数据集获得了F1为52.5%。

## 简介
组织现实世界的事实并存储到机构化的数据库，大规模的知识库(KB)中，例如DBPedia和Freebase,已经成为支撑开放领域问答的很重要的资源。很多先进的KB-QA的方法是基于语义解析的，问题被映射为形式化的有意义的表示（比如，逻辑形式），然后被翻译成一个KB查询。问题的答案可以简单的通过运行这个查询来检索到。语义解析也提供了对问题更深的理解，这样就可以用来判断答案，同时也可以为开发者分析错误提供简单的可解释的信息。

然而，很多传统的语义解析方法与知识库严重脱钩，因此应用到像QA这样的领域就面临一些问题。例如，当逻辑形式使用的谓语与KB中定义的谓语不一致时，一般的意义表示就会有本体匹配问题。即使表示语言与知识库模式很相似，从知识库中的大型词库中查找正确的、在表达中描述的的关系仍然是一个很困难的问题。

受到（Yao and Van Durme,2014;Bao et al.,2014）的启发，我们提出了一个语义解析框架，对一个输入形成解析时可以更紧密的利用知识库。我们首先定义了查询图，它可以用lambda-calculus直接映射为逻辑形式，并且语义上与lambda-DCS(Liang,2013)紧密相关。然后语义解析简化为查询图的生成，形式化为一个有阶段性状态和动作的查询问题。每个状态是查询图表示里的候选解析，每个动作定义了增长图的方式。语义解析的表示能力由可应用到每个状态的合法的动作来控制。特别的，把动作分为三个主要阶段：定位问题中的主题实体，找到答案和主题实体间的关系，使用描述答案属性或答案与其他实体关系的额外的约束来扩展查询图。

这种分阶段的设计的一个关键的优点是，通过把表达部分地映射到KB中的实体和谓语，我们可以关注空间中更可能产生正确查询图的部分，从而使查询更高效。比如，问题“Who first voiced Meg on Family Guy?”，当把"Family Guy"链接到知识库中的FamilyGuy（the TV show）之后，程序只需要检查可以应用到"FamilyGuy"的谓语，而不是KB中所有的谓语。
当给定了这个环境，分解其他的实体也变得简单了，很显然这里的Meg指的是MegGriffin(FamilyGuy中的人物)。

我们的设计把这种特别的语义解析问题分解成几个子问题，比如实体链接和关系匹配。使用这个整合的框架，每个子问题最好的方案可以被简单的结合起来，并帮助产生正确的语义解析。比如，我们使用的实体链接系统输出每个问题中的实体有很高的准确率和召回率。另外，通过利用最近发展的基于卷积神经网络语义匹配框架，我们提出了使用连续空间表示的匹配模型，而不是单纯的词汇匹配。

## 背景
### 知识库

为了与已有的方法比较，我们使用Freebase,它是一个大型数据库，有超过46million的主题和2.6亿的事实。在Freebase的设计中，有一个特殊的实体类别叫做合成值类型（CVT）,它不现实世界的实体，但是可以用来存放事件的多个域或一个特殊的关系。

### 查询图

给定一个问题，运行逻辑形式的查询与找到可以映射为查询的子图然后解析变量的捆绑是等同的。我们描述了一个约束的lambda-calculus子集作为查询图。
我们的查询图包含四种类型的结点：基础实体（圆角矩形），存在的变量（圆），lambda变量（阴影圆），聚集函数（菱形）。基础实体是知识库中存在的实体；存在的变量和lambda变量是非基础实体。
我们的查询图设计是受到（Reddy et al.,2014）的启发，但是有一些关键的不同。我们的查询图里的结点和边与知识库里的实体和谓语属性相似。这样，就可以直接把图转换成逻辑形式。

## 阶段查询图生成

查询图的生成过程：
首先，树状图由一个实体组成，作为根节点，代表主题实体。第二，存在唯一的lambda变量x作为答案结点，从根节点到它有一个有向的路径，并且中间有0个或更多的变量。我们把这个路径叫做图的核心推理链，因为它描述了主题实体和答案之间的主要关系。变量只能出现在这个链上，并且这个链上除了根节点只有可变节点。最后，0个或更多实体或聚集节点可以关联到每个可变节点，包括答案结点。这些分支是答案需要满足的额外的约束信息。比如，在图2中，FamilyGuy是根，FamilyGuy->y->x是核心推理链。

给定一个问题，查询图生产过程可以形式化为一个搜索过程，这个过程有阶段性的状态和动作。一个动作可以通过添加一些边和结点来增长一个给定的图。有四种动作：Ae表示选择一个实体结点；Ap表示决定核心推理链；Ac和Aa分别表示添加约束和聚集节点。给定一个状态，合法的动作集可以由图3中的有限状态图来定义。注意，为了实现的方便，我们选择可能的动作顺序。原则上，我们可以选择不同的顺序，比如首先匹配核心推理链，然后决绝主题实体链接。然而，因为在搜索的过程中我们会考虑多个假定，阶段动作的顺序可以简单的视为减少搜索空间或者偏向探索顺序的的不同方式。

我们使用一个log-linear模型在状态空间上定义回报函数。这个回报估计查询图正确解析问题的likelihood。搜索过程使用最佳优先策略。

### 3.1 主题实体链接
我们使用一个为短的和有噪声的文本而设计的实体链接系统，对于知识库的每个实体e，这个系统首先准备一个形式词汇库列出e可能出现的所有的形式。这个词汇库使用多个数据源来创建，比如实体的名字和别名，Web文档的标记文本和Wikipedia的重定向表格。给定一个问题，考虑所有的在词典中出现的连贯的词语序列可能的mentions，并与可能的实体一起形成一对。每个对使用基于对在词典中的频率的统计模型进行评分。为了是模型能够容忍实体链接产生的错误，同时探索更多可能的查询图，我们选前10个实体作为主题实体。链接分数也会作为回报函数的一个特征。

### 3.2 鉴别核心推理连
给定一个与单节点的图相应的状态s,扩展这个图合理的动作是识别核心推理链，也就是主题实体和答案之间的关系。比如，图5中有3个可能的链，因为主题实体e已经给了，我们只需要探索可以从e出发的合法的predicate序列。特别的，为了限制搜索的空间，当中间的变量是CVT类型的节点，我们就探索长度为2的所有路径，否则就探索长度为1的路径。
实体链接的目标是找到mentions到知识库中entities的映射，与实体链接问题类似，识别核心推理链的目标是把问题的自然表达映射到正确的predicate序列。我们把这个问题简化为使用神经网络测量语义相似度。

### 3.3 增加约束和聚集


